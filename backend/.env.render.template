# ========================================
# MI-PYME - Render.com Environment Variables Template
# ========================================
# Instructions for deploying to Render.com
# Copy these values to Render dashboard: Settings > Environment
# ========================================

# ========================================
# 1. CRITICAL - MUST CONFIGURE
# ========================================

# Django Secret Key (ALREADY GENERATED - copy as-is)
DJANGO_SECRET_KEY=9h_v9obv1tp0yv2l%(pdmg6yjbv&hxi8g!c2f-&-_3kgo!+k4o

# Settings Module (DO NOT CHANGE)
DJANGO_SETTINGS_MODULE=core.settings.prod

# Debug (DO NOT CHANGE)
DJANGO_DEBUG=False

# Allowed Hosts - REPLACE with your Render domain
# Example: mipyme-api.onrender.com
# Add multiple domains separated by commas
DJANGO_ALLOWED_HOSTS=mipyme-api.onrender.com

# CORS Origins - REPLACE with your actual domain(s)
# Must use HTTPS in production
# Example: https://mipyme-api.onrender.com
CORS_ALLOWED_ORIGINS=https://mipyme-api.onrender.com

# Database URL - PROVIDED BY RENDER
# In Render dashboard:
# 1. Create PostgreSQL database
# 2. Copy "Internal Database URL"
# 3. Paste here
# Example: postgres://user:pass@hostname/dbname
DATABASE_URL=

# Field Encryption Key (ALREADY GENERATED - copy as-is)
FERNET_KEY=ds6XT8xyg88jm91tQiHyVoRJIPKZtiKka-_FXqbkMIg=

# ========================================
# 2. RECOMMENDED (Optional but improves experience)
# ========================================

# Redis Cache URL - PROVIDED BY RENDER (if you add Redis service)
# Significantly improves performance
# In Render dashboard:
# 1. Create Redis service
# 2. Copy "Internal Redis URL"
# 3. Paste here
REDIS_URL=

# Email Configuration (for password resets, notifications)
# Option 1: Gmail App Password (free)
# Option 2: SendGrid API (free tier: 100 emails/day)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
DEFAULT_FROM_EMAIL=MI-PYME <noreply@mipyme.com>

# ========================================
# 3. OPTIONAL (Nice to have)
# ========================================

# Sentry Error Tracking (free tier available)
# Highly recommended for production
# Sign up at https://sentry.io and copy DSN
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Application Version
APP_VERSION=1.0.0

# Environment Name
ENVIRONMENT=production

# Logging Level
LOG_LEVEL=INFO
DJANGO_LOG_LEVEL=INFO

# ========================================
# 4. SECURITY SETTINGS
# ========================================

# SSL Redirect (set to True for HTTPS)
SECURE_SSL_REDIRECT=True

# ========================================
# STEP-BY-STEP GUIDE FOR RENDER.COM
# ========================================

# STEP 1: Create PostgreSQL Database
# ------------------------------------
# 1. Go to Render dashboard
# 2. Click "New +" > "PostgreSQL"
# 3. Name: mipyme-db
# 4. Plan: Free (90 days) or Starter ($7/month)
# 5. Click "Create Database"
# 6. Wait for it to provision (~2 minutes)
# 7. Copy "Internal Database URL" from database page
# 8. Paste it in DATABASE_URL above

# STEP 2: Create Redis (Optional but recommended)
# -------------------------------------------------
# 1. Click "New +" > "Redis"
# 2. Name: mipyme-redis
# 3. Plan: Free (25MB) or Starter ($10/month for 256MB)
# 4. Click "Create Redis"
# 5. Copy "Internal Redis URL"
# 6. Paste it in REDIS_URL above

# STEP 3: Create Web Service
# ---------------------------
# 1. Click "New +" > "Web Service"
# 2. Connect your GitHub repository
# 3. Name: mipyme-api
# 4. Environment: Docker
# 5. Plan: Free or Starter ($7/month)
# 6. Build Command: (auto-detected from Dockerfile)
# 7. Start Command: gunicorn --config gunicorn.conf.py core.wsgi:application

# STEP 4: Configure Environment Variables
# ----------------------------------------
# In your web service settings > Environment:
# Click "Add Environment Variable" for each variable above
# Copy/paste the KEY and VALUE for each one
# IMPORTANT: Don't include the # comments, just KEY=VALUE

# STEP 5: Update Allowed Hosts
# -----------------------------
# After service is created, Render will give you a URL like:
# https://mipyme-api.onrender.com
#
# Update these variables with your actual URL:
# DJANGO_ALLOWED_HOSTS=mipyme-api.onrender.com
# CORS_ALLOWED_ORIGINS=https://mipyme-api.onrender.com

# STEP 6: Deploy
# ---------------
# Click "Manual Deploy" > "Deploy latest commit"
# Wait for build to complete (~5-10 minutes first time)
# Check logs for any errors

# STEP 7: Run Migrations
# -----------------------
# In Render dashboard > Shell (or SSH):
# python manage.py migrate
# python manage.py createsuperuser

# STEP 8: Verify
# ---------------
# Visit: https://your-service.onrender.com/api/health/
# Should return: {"status": "healthy", "database": "ok", ...}

# ========================================
# COST BREAKDOWN (Render.com)
# ========================================

# FREE TIER:
# - Web Service: Free (spins down after 15 min inactivity)
# - PostgreSQL: Free for 90 days, then expires
# - Redis: 25MB free
# Total: $0/month (with limitations)

# STARTER (Recommended for production):
# - Web Service: $7/month (always on, 512MB RAM)
# - PostgreSQL: $7/month (1GB storage)
# - Redis: $10/month (256MB)
# Total: $24/month

# Note: Free tier is perfect for testing and MVP
# Upgrade to Starter when you have paying customers

# ========================================
# TROUBLESHOOTING
# ========================================

# Issue: Build fails with "SECRET_KEY not found"
# Solution: Make sure DJANGO_SECRET_KEY is in environment variables

# Issue: Database connection failed
# Solution: Verify DATABASE_URL is the "Internal" URL, not "External"

# Issue: ALLOWED_HOSTS error
# Solution: Add your Render domain to DJANGO_ALLOWED_HOSTS

# Issue: CORS error from frontend
# Solution: Add your frontend URL to CORS_ALLOWED_ORIGINS with https://

# Issue: Service keeps spinning down (Free tier)
# Solution: Upgrade to Starter ($7/month) or use cron job to ping every 14 min
